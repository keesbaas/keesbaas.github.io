
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    
    <title>tetons</title>
    
    <link rel="stylesheet" href="style2.css"> <!-- Links your styles -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

  
<style>
 
</style>

</head>
<body>
    <header>

        
        <h1>tetons</h1>
            <a href="index.html" class="fade-link">back</a>
    
            <style>

            </style>
    </header>
    
    <!-- Zion hike map -->
<div class="map-text-container">
    <div id="map"></div>
    <div class="right-text">
        
        <p>In the summer of 2021 Matt and I backpacked the Teton Crest Trail heading north through the park. Matt drove out to the park from Michigan and picked me up at the Jackson airport. He had grabbed some permits the day before by loosely camping outside the visitor center (unclear when it goes from lining up for permits to camping outside of a campground). We stayed at Shadow Mountain the night before the trip which was absolutely popping, had to drive way further up than we wanted in the Mazda. But it works out. Started out hiking the next day stupid early.</p>
        <br>
        <p>When we finished the trek, we had to hitchike back to our car (which was actually reccommended by the park ranger). We first got picked up by a couple from Alabama who had a truck and offered to let us sit in the back with their motorcycle. Super nice people, sitting in the truck bed going 55mph felt wildly good after being in the backcountry for a while. One of them took a picture of us that she said looked super good and asked for my number to send it, but I never got it. They took us about halfway and then we got a ride from some folks from Bozeman the rest of the way. They were in like, a CRV that was packed to the gills and said if we could fit they'd drive us. So we squeezed on top of everything in the back smelling absolutely disgusting and they took us to our car. We actually ended up hanging out with them for a little bit since they invited us to join 'em on a hike out to a little swimming lake.</p>
        <br>
        <p>Overall, phenomenal trip. 10/10. Tetons are probably my favorite place I've been? Maybe outside of Glacier.</p>
    </div>
</div>

<!-- Container where JS will populate rows -->
<div class="album-container" id="album-container"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<!-- Leaflet GPX plugin -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-gpx/1.7.0/gpx.min.js"></script>



<script>
  const map = L.map('map').setView([43.738190789423825, -110.7386367691654], 10); // 48.01521337568915, -88.85357011718955 Isle Royale coordinates


  // L.tileLayer(
  //   'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
  //   { attribution: 'Esri' }
  // ).addTo(map);

    // --- Esri basemaps ---

const esriImagery = L.tileLayer(
  'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
  { attribution: 'Esri' }
);

const esriTopo = L.tileLayer(
  'https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',
  { attribution: 'Esri' }
);

// Labels (shared overlay)
const esriLabels = L.tileLayer(
  'https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',
  { attribution: 'Esri' }
);

    esriImagery.addTo(map);
esriLabels.addTo(map);

const baseMaps = {
  "Satellite": esriImagery,
  "Topo": esriTopo
};

const overlays = {
  "Labels": esriLabels
};

L.control.layers(baseMaps, overlays, {
  position: 'topright',
  collapsed: true
}).addTo(map);


//     const esriLabels = L.tileLayer(
//   'https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',
//   { minZoom: 6 }
// );



// // Labels + roads overlay
// L.tileLayer(
//   'https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}',
//   { attribution: 'Esri' }
// ).addTo(map);

// Load Zion park boundary - Loads all boundaries, should be alright
fetch('visited_parks.geojson')
  .then(response => response.json())
  .then(data => {
    L.geoJSON(data, {
      style: {
        color: '#ffffff',    // border color
        weight: 2,
        fillColor: '#ffffff', // semi-transparent fill
        fillOpacity: 0.2
      }
    }).addTo(map);
  })
  .catch(err => console.error('Failed to load boundary geojson:', err));

    
  new L.GPX('TCT.gpx', {    
    async: true,
    polyline_options: {
      color: '#00E5FF',
      weight: 4,
      opacity: 0.9
    },
    
    marker_options: {
      startIconUrl: null,   // no start marker
      endIconUrl: null,     // no end marker
      shadowUrl: null
    
  
    }
  })
  .on('loaded', function(e) {
    // map.fitBounds(e.target.getBounds(), { padding: [20, 20] });
  })
  .on('error', function(err){
    console.error('Failed to load GPX:', err);
  })
  .addTo(map);

const blackTriangle = L.divIcon({
    className: '', // no default styles
    html: '<div style="width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid white;"></div>',
    iconSize: [10, 10],
    iconAnchor: [5, 10] // point the tip at the location
});



    
  // Add photo markers along the route - CHANGE WITH NEW LAT-LONG AND PICS
  const photos = [
    
    { id: 8, lat: 43.60704924734776, lng: -110.79455356556245, caption: "Granite Canyon TH" }, // Lee's Passs 37.451913033497036, -113.19085476210358
    { id: 5, lat: 43.623507586386886, lng: -110.9282585424907, caption: "Marion Lake" }, // LVCT 1 37.44122339394357, -113.1911679773198
    { id: 4, lat: 43.68407450254307, lng: -110.8746979753683, caption: "Meek Pass" }, // Site 11 37.41736119491232, -113.14624609969904
    { id: 9, lat: 43.69583909901743, lng: -110.85205523059872, caption: "Alaska Basin" }, // Site 3 - last night 37.28561389729613, -112.98169245841686
    { id: 3, lat: 43.7106925132393, lng: -110.85545091759495, caption: "Sunset Lake" }, // Hop Valley 1 - 37.39865875167123, -113.13820534907968
    { id: 7, lat: 43.725653504307566, lng: -110.848896443428, caption: "Schoolroom Glacier" }, // Hop Valley 2 - 37.38033818718934, -113.12821879883452
    { id: 1, lat: 43.728472460073995, lng: -110.85075732988804, caption: "Hurricane Pass" }, // Hop Valley 3 - 37.37884768252302, -113.12681601118648
    { id: 0, lat: 43.777533029002804, lng: -110.82628593430928, caption: "Teton View" }, // WR1 - 37.28252457546417, -112.97925092588062
      { id: 10, lat: 43.781163090696964, lng: -110.82767130453647, caption: "Cascade Creek Campsite" }, // WR1 - 37.28252457546417, -112.97925092588062
      { id: 2, lat: 43.71731503348155, lng: -110.85627116688883, caption: "HP Trail" } // WR1 - 37.28252457546417, -112.97925092588062
    // ...add more with correct lat/lng and your album index
  ];

  photos.forEach(photo => {
    const marker = L.marker([photo.lat, photo.lng], {
      title: photo.caption,
        icon: blackTriangle
    }).addTo(map);

       marker.bindTooltip(photo.caption, {
    permanent: true,       // always visible
    direction: 'top',      // position above marker
    offset: [10, -10],     // x (right), y (up) in pixels
    className: 'photo-label-text',  // optional CSS class for styling
    interactive: true  
       });

    marker.on('tooltipopen', () => {
  const tooltipEl = marker.getTooltip().getElement();
  if (!tooltipEl) return;

  tooltipEl.addEventListener('click', () => {
    const photoRow = document.querySelectorAll('.photo-row')[photo.id];
    if (photoRow) {
      photoRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  });
});


    marker.on('click', () => {
      // Scroll to the photo in your album
      const photoRow = document.querySelectorAll('.photo-row')[photo.id];
      if(photoRow){
        photoRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    });
  });
</script>

    
<!-- <script>
  // Initialize map centered on Zion
  const map = L.map('map').setView([37.2982, -113.0263], 13);

  // ESRI World Imagery basemap
  L.tileLayer(
    'https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',
    { attribution: 'Esri' }
  ).addTo(map);

  // Load and animate GPX trail
  new L.GPX('ZionTraverse.gpx', {
    async: true,
    polyline_options: {
      color: '#00E5FF',
      weight: 4,
      opacity: 0.9
    },
    marker_options: {
      startIcon: null,   // remove start marker
      endIcon: null,     // remove end marker
      shadow: null
    }
  })
  .on('loaded', function(e) {
    // Loop through all layers (tracks) in the GPX file
    e.target.getLayers().forEach(polyline => {
      if (polyline instanceof L.Polyline) {
        const latlngs = polyline.getLatLngs();

        // Zoom map to bounds of this track
        map.fitBounds(polyline.getBounds(), { padding: [20, 20] });

        // Animate drawing
        polyline.setLatLngs([]); // start with empty line
        let i = 0;
        const drawInterval = setInterval(() => {
          if (i < latlngs.length) {
            polyline.addLatLng(latlngs[i]);
            i++;
          } else {
            clearInterval(drawInterval);
          }
        }, 25); // adjust speed here (ms per point)
      }
    });
  })
  .on('error', function(err){
    console.error('Failed to load GPX:', err);
  })
  .addTo(map);
</script> -->


    
<script>
  const container = document.getElementById('album-container');

  // Load photo data from JSON - NEED TO CHANGE JSON FILE TO HAVE CORRECT PHOTOS
  fetch('tetons.json')
    .then(response => response.json())
    .then(photos => {
      photos.forEach(photo => {
        const row = document.createElement('div');
        row.className = 'photo-row';

        // Link to high-res
        const link = document.createElement('a');
        link.href = photo.highres;
        link.target = "_blank";

        // Image
        const img = document.createElement('img');
        img.src = photo.src;
        img.alt = photo.caption;
        img.loading = "eager";  // ensures image loads right away

        link.appendChild(img);

        // Caption
        const p = document.createElement('p');
        p.textContent = photo.caption;

        // Append to row
        row.appendChild(link);
        row.appendChild(p);
        container.appendChild(row);
      });

      // Fade-in on scroll
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2 });

      document.querySelectorAll('.photo-row').forEach(row => observer.observe(row));
    })
    .catch(err => console.error('Failed to load photos.json:', err));
</script>

</body>
</html>
